<!DOCTYPE html>

<html lang="en">

        <head>
                <!-- Page information -->
                <meta charset="UTF-8" />
                <meta name="node_id" content="first steps">
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <link rel="shortcut icon" href="/favicon.ico" />

                <!-- Set title -->
                <title>Obsidian-Html/Notes</title>

                <!-- Includes -->
                
<script src="/obs.html/static/obsidian_core.js"></script>
<script src="/obs.html/static/encoding.js"></script>
<link rel="stylesheet" href="/obs.html/static/master.css" />
<script src="/obs.html/static/mermaid.9.0.1.min.js"></script>
<script>
  MathJax = {
    loader: {
      load: [
        '[tex]/action',
        'output/chtml',
        '[tex]/centernot'
      ]
    },
    tex: {
      inlineMath: [ ["\\(","\\)"] ],
      displayMath: [ ["\\[","\\]"] ],
      processEscapes: true,
      processEnvironments: true,
      packages: {'[+]': ['centernot']}
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script src="/obs.html/static/flexsearch.bundle.js"></script>
<script src="/obs.html/static/pako.js"></script>
<script src="/obs.html/static/search.js"></script>
<script src="/obs.html/static/dirtree.js"></script>


                <!-- Onload tweaks -->
                <script>
                        const CURRENT_NODE = 'first steps';
                        const HTML_URL_PREFIX = '';
                        const PAGE_DEPTH = 1;
                </script>
        </head>

<body class="theme-obs-light">
        <div id="antiflash" style="display: none;"></div>
        <script>
                document.getElementById('antiflash').style.display = 'block';
        </script>
        <div id="search-master-div">
    <div id="search-slab" king_ramses="return the slaaab">
            <div id="search-controls">
                    <input id="search_string" placeholder="Type to search notes" type="text" />
                    <div class="tooltip" style="display: none;">
                        <input type="checkbox" id="hard_search" name="hard" />
                        <span class="tooltiptext">Hard search (require exact match)</span>
                    </div>
                    <div id="search-results-box">
                        <div id="search-results"></div>
                    </div>
                    <div id="search-instructions">
                        <div class="prompt-instruction">
                                <b>esc</b> to dismiss
                        </div>
                    </div>
            </div>
    </div>
</div>

<script>
    document.getElementById("search-master-div").addEventListener('click', e => {
            if(e.target !== e.currentTarget){
                    return
            }
            toggle_id('search-master-div');
    })
    document.getElementById("search_string").addEventListener("input", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    }); 
    document.getElementById("hard_search").addEventListener("click", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    });

    window.addEventListener('keydown', e => {
        if((e.key=='Escape'||e.key=='Esc'||e.keyCode==27)){
            toggle_id('search-master-div');
            return false;
        } 
    }, true);

    function click_list_link(element){
        element.parentElement.getElementsByTagName('a')[0].click()
    }
</script>

        <div id="page_holder" class="flex_col">
                <div id="header" class="header">
    <div id="header_flex" class="flex_row">
            <a href="/index.html" id="homelink" title="Clear screen and go to homepage">Obsidian-Html/Notes</a>
            <div id="menu_toggle_button" class="navbar-button requires_js" onclick="toggle_menu()">
                    â‰¡
            </div>
            <div id="navbar" class="navbar requires_js">
                    
                    <div class="icon-tray">
                            <div id="theme-button" class="theme-button requires_js" title="Change theme" onclick="toggle_theme_popup(this)">
    T
</div>
<script>
    function toggle_theme_popup(el){
        // make theme button show that it's active by adding the .active class
        toggle(el);

        // show the theme selector
        toggle_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            toggle(pu);
        }
    }

    function disable_theme_popup(){
        disable_id('theme-button');

        // show the theme selector
        disable_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            disable(pu);
        }
    }
</script>
                                    <div onclick="openSearch()" class="theme-button requires_js">
                <img src = "/obs.html/static/search.svg" alt="Search notes" title="Search notes" style="margin: 4px;"/>
        </div>
        <script>
                function openSearch(){
                        // toggle search popup and continue with extra code if it is enabled this time
                        if (toggle_id('search-master-div')){
                                // clear input and put focus on it so that we can start typing immediately
                                let ss = document.getElementById('search_string');
                                ss.value = '';
                                ss.focus()
                                ss.select()
                        }
                }
        </script>
                                    <div class="graph_header_div requires_js">
            <a id="graph_link" class="system-link" href="/obs.html/graph/index.html?node=first steps" title="Open fullpage Graph">
                    <img class="graph_header_div_svg" src = "/obs.html/static/graph.svg" alt="Open fullpage Graph" style="margin: 2px; width: 17px;"/>
            </a>
        </div>
                                    <div >
            <a id="dirtree_link" class="system-link" href="/obs.html/dir_index.html" title="View directory tree">
                    <img src = "/obs.html/static/dirtree.svg" style="width: 12px; padding: 4px;" alt="Directory tree link"/>
            </a>
        </div>
                            <div>
    <a href="/obs.html/tags/index.html" title="Open tag view">
            <img src = "/obs.html/static/hashtag.svg" alt="RSS Feed link" style="width: 24px; margin-left: -2px; margin-top: -2px;"/>
    </a>
</div>
                            
                    </div>
                    <div style="display: flex; flex-direction:column">
                        <div id="left_pane_toggle_nav" class="left_pane_toggle_nav">Toggle Directory Tree Pane</div>
                        <div id="right_pane_toggle_nav" class="right_pane_toggle_nav">Toggle Table of Contents Pane</div>
                    </div>
            </div>
    </div>
    <div class="popup" id="theme-popup">
    <label for="cars">Theme </label>

    <select name="theme" id="theme" onchange="set_theme(this.value)">
      <option value="light">light</option>
      <option value="obs-light" selected="selected">obsidian-light</option>
      <option value="obs-dark">obsidian-dark</option>
    </select> 
</div>
</div>
                <div class="flex_row">
                        <div id="left_pane" class="left_pane active">
    <div id="left_pane_fold_header" class="left_pane_fold_header fold_header">x</div>
    <div id="left_pane_content" class="left_pane_content">
            <div class="dirtree"><button id="folder-1" class="dir-button" onclick="toggle_dir(this.id)">Red Pitaya Guide</button>
<div id="folder-container-1" class="dir-container requires_js active" path="/Red Pitaya Guide">
	<button id="folder-2" class="dir-button" onclick="toggle_dir(this.id)">Attachments</button>
	<div id="folder-container-2" class="dir-container requires_js " path="/Red Pitaya Guide/Attachments">
		<ul class="dir-list">
			<li><a class="" href="/Red Pitaya Guide/Attachments/RedPitaya.PNG"  class="external-link">RedPitaya</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/RedPitaya_web_server.PNG"  class="external-link">RedPitaya_web_server</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/RedPitaya_web_server_ip.PNG"  class="external-link">RedPitaya_web_server_ip</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/matlab_System_generator_Block.PNG"  class="external-link">matlab_System_generator_Block</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/matlab_System_generator_Block-clocking.PNG"  class="external-link">matlab_System_generator_Block-clocking</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/matlab_System_generator_Block_Ip_catalog.PNG"  class="external-link">matlab_System_generator_Block_Ip_catalog</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/matlab_umgebungsvariablen.PNG"  class="external-link">matlab_umgebungsvariablen</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/putty_connection_interface.PNG"  class="external-link">putty_connection_interface</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/putty_run_bitstream.PNG"  class="external-link">putty_run_bitstream</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/scematicsRedPitaya.svg"  class="external-link">scematicsRedPitaya</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/vivado_block_design.PNG"  class="external-link">vivado_block_design</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/vivado_generate_bitstream.PNG"  class="external-link">vivado_generate_bitstream</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/vivado_ip_catalog.PNG"  class="external-link">vivado_ip_catalog</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/vivado_template_project_path.PNG"  class="external-link">vivado_template_project_path</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/vivado_user_repository.PNG"  class="external-link">vivado_user_repository</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/winSCP_bitstream_file.PNG"  class="external-link">winSCP_bitstream_file</a></li>
			<li><a class="" href="/Red Pitaya Guide/Attachments/winSCP_login_to_redPitaya.PNG"  class="external-link">winSCP_login_to_redPitaya</a></li>
		</ul>
	</div>
	<button id="folder-3" class="dir-button" onclick="toggle_dir(this.id)">Dev</button>
	<div id="folder-container-3" class="dir-container requires_js " path="/Red Pitaya Guide/Dev">
		<ul class="dir-list">
			<li><a class="" href="/Red Pitaya Guide/Dev/Creating external clock.html"  >Creating external clock</a></li>
		</ul>
	</div>
	<button id="folder-4" class="dir-button" onclick="toggle_dir(this.id)">Internal reference design</button>
	<div id="folder-container-4" class="dir-container requires_js " path="/Red Pitaya Guide/Internal reference design">
		<button id="folder-5" class="dir-button" onclick="toggle_dir(this.id)">ARM</button>
		<div id="folder-container-5" class="dir-container requires_js " path="/Red Pitaya Guide/Internal reference design/ARM">
			<ul class="dir-list">
				<li><a class="" href="/Red Pitaya Guide/Internal reference design/ARM/Server library.html"  >Server library</a></li>
			</ul>
		</div>
		<button id="folder-6" class="dir-button" onclick="toggle_dir(this.id)">Vivado</button>
		<div id="folder-container-6" class="dir-container requires_js " path="/Red Pitaya Guide/Internal reference design/Vivado">
			<ul class="dir-list">
				<li><a class="" href="/Red Pitaya Guide/Internal reference design/Vivado/RefProjectDecisionTree.excalidraw.png"  class="external-link">RefProjectDecisionTree.excalidraw</a></li>
				<li><a class="" href="/Red Pitaya Guide/Internal reference design/Vivado/Reference project documentation.html"  >Reference project documentation</a></li>
			</ul>
		</div>
		<ul class="dir-list">
		</ul>
	</div>
	<button id="folder-7" class="dir-button" onclick="toggle_dir(this.id)">Issues</button>
	<div id="folder-container-7" class="dir-container requires_js " path="/Red Pitaya Guide/Issues">
		<ul class="dir-list">
			<li><a class="" href="/Red Pitaya Guide/Issues/Adding folder as IP repository.html"  >Adding folder as IP repository</a></li>
			<li><a class="" href="/Red Pitaya Guide/Issues/Compiling and running C app for Red Pitaya.html"  >Compiling and running C app for Red Pitaya</a></li>
			<li><a class="" href="/Red Pitaya Guide/Issues/DMA operation for data recording.html"  >DMA operation for data recording</a></li>
			<li><a class="" href="/Red Pitaya Guide/Issues/Memory-mapped address mess.html"  >Memory-mapped address mess</a></li>
			<li><a class="" href="/Red Pitaya Guide/Issues/Model composer default Matlab.html"  >Model composer default Matlab</a></li>
			<li><a class="" href="/Red Pitaya Guide/Issues/Rebuilding reference project.html"  >Rebuilding reference project</a></li>
			<li><a class="" href="/Red Pitaya Guide/Issues/Red Pitaya reserved DDR memory patch.html"  >Red Pitaya reserved DDR memory patch</a></li>
			<li><a class="" href="/Red Pitaya Guide/Issues/Running bash script for compilation.html"  >Running bash script for compilation</a></li>
			<li><a class="" href="/Red Pitaya Guide/Issues/Setting up Rust Crosscompiling.html"  >Setting up Rust Crosscompiling</a></li>
		</ul>
	</div>
	<ul class="dir-list">
		<li><a class="" href="/Red Pitaya Guide/FAQ.html"  >FAQ</a></li>
		<li><a class="active" href="/Red Pitaya Guide/First steps.html"  >First steps</a></li>
	</ul>
</div>
<ul class="dir-list">
	<li><a class="" href="/index.html"  >index</a></li>
</ul>
</div>
    </div>
</div>
                        <div class="container">
                                <embeddedtitle>First steps</embeddedtitle>
<div class="content"><h2 id="hardwareaufbau-zum-testen-des-fpga">Hardwareaufbau zum Testen des FPGA</h2>
<p>Das Folgende Bild zeigt alle Komponenten, die NÃ¶tig sind um den Workflow zur Implementierung eines Bitstreams auf einer RedPitaya-Einheit zu implemenetieren.   </p>
<p><img alt="" src="/Red%20Pitaya%20Guide/Attachments/scematicsRedPitaya.svg" />   </p>
<h3 id="signal-generator">Signal Generator</h3>
<p>Der Signal generator kann ein kontinuirliches Analoges Signal ausgeben. Das signal ist dabei Periodisch. <br />
Um Ein Signal generieren zu kÃ¶nnen mÃ¼ssen dabei Folgende Schritte durchgefÃ¼hrt werden:   </p>
<ol>
<li>Signal generator an den Strom anschlieÃŸen.   </li>
<li>Signalgenerator    </li>
</ol>
<h3 id="oszilloskop">Oszilloskop</h3>
<p>Das Oszilloskop ist in der Lage ein Periodisches analoges signal, welches an seinen EingÃ¤ngen angeschlossen ist auf seinem Monitor darzustellen. <br />
Um ein Signal darstellen zu wollen mÃ¼ssen Folgende Dinge getan werden:   </p>
<ol>
<li>Oszilloskop an den Strom anschlieÃŸen   </li>
</ol>
<h3 id="redpitaya">RedPitaya</h3>
<p>The RedPitaya is a SOC (System on a Chip), which has an FPGA chip as its main computing unit. <br />
In addition to the PL (Programmable Logic), the main computing unit also has an ARM Dual Core Cortex A9 processor. Other components of the SOC are:   </p>
<ol>
<li>2x RF inputs with 125Msps sampling frequency and 14Bit resolution   </li>
<li>2x RF output with 125Msps sampling frequency and 14Bit resolution   </li>
<li>ethernet connector   </li>
<li>SD card slot   </li>
</ol>
<p>The illustration below shows the Redpitaya in full detail:   </p>
<p><img alt="" src="/Red%20Pitaya%20Guide/Attachments/RedPitaya.PNG" />   </p>
<p>In order to establish a connection with the RedPitaya, the following points must be completed:   </p>
<ol>
<li>connect the RedPitaya to the power supply.   </li>
<li>connect the Ethernet cable between RedPitaya and the PC   </li>
<li>call up the Ethernet address mapped on the port of RedPitaya in the browser of the PC for the current RedPitaya (http://rp-f09cf2.local/).   </li>
</ol>
<p><img alt="" src="/Red%20Pitaya%20Guide/Attachments/RedPitaya_web_server.PNG" />   </p>
<ol>
<li>Navigate to: System &gt;&gt; Network manager &gt;&gt; Address: To get the <strong>current IP-Address</strong>   </li>
</ol>
<p><img alt="" src="/Red%20Pitaya%20Guide/Attachments/RedPitaya_web_server_ip.PNG" />   </p>
<ol>
<li>
<p>Install and Start WinSCP (https://winscp.net/eng/download.php)   </p>
</li>
<li>
<p>Enter:   </p>
<ol>
<li>Serveradress &gt;&gt; <strong>current IP-Adress</strong>   </li>
<li>Username (Benutzername)&gt;&gt; root   </li>
<li>Passwort &gt;&gt; root   </li>
<li>Log in (Amelden)   </li>
</ol>
</li>
</ol>
<p><img alt="" src="/Red%20Pitaya%20Guide/Attachments/winSCP_login_to_redPitaya.PNG" /> <br />
7.  Download and Start Putty (https://www.putty.org/) <br />
    1. Connect to RedPitaya by entering <strong>current IP-Adress</strong> <br />
    2. login as: root <br />
    3. password: root   </p>
<p><img alt="" src="/Red%20Pitaya%20Guide/Attachments/putty_connection_interface.PNG" />   </p>
<ol>
<li>In WinSCP navigate to directory: <strong>/root/</strong>   </li>
</ol>
<p>To start a TCP connection, the TCP server stored here is started. Furthermore, all data recorded via the ResPitaya is stored in this folder and can be transferred to the computer via winSCP.   </p>
<h2 id="work-with-vivado">Work with Vivado</h2>
<p>Vivado is a high level programming environment for working with HDL code for the FPGA bitstream disign. To generate a bistream with a prefabricated template, the following things have to be done.    </p>
<div class="callout callout-info active" rasa="1">
<div class="callout-title">
<div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="callout-icon"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
</div>
<div class="callout-title-name">Info
</div>
</div>
<div class="callout-content">
<p>If you didn't rebuild the reference/template project for the first time, follow <a href="/not_created.html" class="nonexistent-link">this issue</a>  <br />
</p>
</div>
</div>
<ol>
<li>Navigate to working Directory of Vivado project template   </li>
<li>Start Project file   <ol>
<li>Vivado will be opened <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/vivado_template_project_path.PNG" />   </li>
</ol>
</li>
</ol>
<p>If no IP-File was generated yet, go to <strong><a href="/Red%20Pitaya%20Guide/First%20steps.html#hardwareaufbau-zum-testen-des-fpga">this section</a></strong> and follow instructions to generate an IP-File with a bitstream   </p>
<ol>
<li>Go to IP Catalog (Flow navigator (left bar)) <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/vivado_ip_catalog.PNG" />   </li>
<li>Right click User Repository   <ol>
<li>Refresh Repository <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/vivado_user_repository.PNG" />   </li>
</ol>
</li>
<li>
<p>Open Block Designe (Flow Navigator -&gt; IP Integrator -&gt; Open Block Design) <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/vivado_block_design.PNG" />   </p>
</li>
<li>
<p>Right click into Block Designer -&gt; Add Ip -&gt; Add your generated IP   </p>
</li>
<li>If possible -&gt; Run connection automation   </li>
<li>Generate Bitstream   <ol>
<li>Run Synthesis   </li>
<li>Run Implementation   </li>
<li>Generate Bitstream <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/vivado_generate_bitstream.PNG" />   </li>
</ol>
</li>
</ol>
<p>A bitstream file is now generated and can be used for Implementation on the FPGA. For that the File has to be located in the Project structure and send over winSCP to the root folder of the FPGA. There it can be executed.   </p>
<ol>
<li>Name of the directory where bit-stream file is generated: <code>repo_name/impl/proj/project_name/vivado_project_name.runs/implementation_name(default:impl1)</code>   </li>
<li>move bitstreamfile <strong>design_file_name.bit</strong> to Redpitaya over winSCP -&gt; /root/  <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/winSCP_bitstream_file.PNG" />   </li>
<li>run command <strong>cat /root/design_file_name.bit &gt; /dev/xdevcfg</strong> in RedPitaya Terminal   <ol>
<li>FPGA is now configured with the bitstream <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/putty_run_bitstream.PNG" />   <blockquote>
<p>[!info] <br />
After restarting Red Pitaya (turning power off/on), default bitstream is gonna be loaded instead of this one.   </p>
</blockquote>
</li>
</ol>
</li>
</ol>
<h2 id="preparing-a-bitstreams-in-simulink">Preparing a Bitstreams in Simulink</h2>
<p>Work through the implementation tutorial of the Vivado Systems generator for Matlab:   </p>
<p><a href="https://docs.xilinx.com/r/en-US/ug948-vivado-sysgen-tutorial/Step-2-Creating-an-Optimized-Design-in-an-FPGA" class="external-link">https://docs.xilinx.com/r/en-US/ug948-vivado-sysgen-tutorial/Step-2-Creating-an-Optimized-Design-in-an-FPGA</a>   </p>
<div class="callout callout-warning active" rasa="1">
<div class="callout-title">
<div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="callout-icon"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
</div>
<div class="callout-title-name">Warning
</div>
</div>
<div class="callout-content">
<p>If not the correct version of matlab and Simulink is installed Problems can occur. Make sure you have installed the correct version of Matlab! (Link to be added) <br />
</p>
<p>If more then one versions of matlab are installed on your machine you need to add it your Path-Variable such that the required Matlab version is the <a href="/not_created.html" class="nonexistent-link">first on your Systems path</a>. <br />
</p>
</div>
</div>
<p>To now generate a bitstream, go to your Simulink model of the bitstream. And open the Systems generator Block:   </p>
<p><strong>Set Parameters:</strong> <br />
1. Board -&gt; None <br />
2. Part    -&gt; Zynq xc7z020-1clg400 <br />
3. Compilation IP Catalog -&gt; Settings <br />
    1. library -&gt; SysGen <br />
    2. use common repo -&gt; [x] <br />
        1.  enter [repo_dic]/impl/srcs/ips   </p>
<p><img alt="" src="/Red%20Pitaya%20Guide/Attachments/matlab_System_generator_Block_Ip_catalog.PNG" /> <br />
4. Hardware description language -&gt; Verilog / doesn't matter <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/matlab_System_generator_Block.PNG" /> <br />
5.  TAB -&gt; Clocking <br />
    1. Default clock timeing of redPitaya is 8ns <br />
    2. Set Clock setting as needed for your project <br />
<img alt="" src="/Red%20Pitaya%20Guide/Attachments/matlab_System_generator_Block-clocking.PNG" /> <br />
6. TAB -&gt; General  <br />
    1. Sometimes if problems haben clearing the cach helps <br />
7. If everything is done -&gt; Apply -&gt; Generate <br />
    1. The coresponding IP-File is going to be generated into the common repo from (4.1)</p></div>
<div class="note-footer">
<div class="backlinks">
<h2>Backlinks</h2>
<ul>
	<li><a class="backlink" href="/index.html">index</a></li>
	<li><a class="backlink" href="/Red Pitaya Guide/First steps.html">first steps</a></li>
	<li><a class="backlink" href="/Red Pitaya Guide/FAQ.html">red pitaya guide/faq</a></li>
</ul>
</div>

<div class="tags">

</div>

</div>
<div class="graph requires_js ">
    <div id="A326151621326237012969709897206094936602{level}" class="graph_div"></div>
    
    <div class="graph-button-row" style="display:flex;">
        <button class="graph_button graph_show_button" id="B326151621326237012969709897206094936602{level}" level="{level}" note_temp_id="326151621326237012969709897206094936602" onclick="window.ObsHtmlGraph.run(this, '326151621326237012969709897206094936602', 'first steps');">
            Show Graph
        </button>
        <button class="graph_button graph_type_button" id="C326151621326237012969709897206094936602{level}" style="flex:1" onclick="window.ObsHtmlGraph.switch_graph_type(this);">
            2D
        </button>
    </div>
</div>

<script type="module">
    if (window.ObsHtmlGraph == undefined){
        import('/obs.html/static/graph.js').then((Module) => {
            window.ObsHtmlGraph = Module;
            window.ObsHtmlGraph.arm_page(document.getElementById('page_holder'))
        })
    }
</script>




                                <!-- end content -->
                        </div>
                        <div class="container_filler">
                        </div>
                        <div id="right_pane" class="right_pane active">
    <div id="right_pane_fold_header" class="right_pane_fold_header fold_header">x</div>
    <div id="right_pane_content" class="right_pane_content">
            
    </div>
</div>
                </div>
        </div>

        <script>
                function handle_toggle_side_bar(e){
                        let header;
                        let pane; 
                        let target = e.target

                        // switch out the navbar button click for a header click
                        if (target.id == 'left_pane_toggle_nav'){
                                target = document.getElementById('left_pane_fold_header')
                        }
                        else if (target.id == 'right_pane_toggle_nav'){
                                target = document.getElementById('right_pane_fold_header')
                        }

                        // get header and pane
                        if (target.classList.contains('fold_header')) {
                                header = target;
                                pane = target.parentElement;
                        }
                        else {
                                pane = target;
                                header = target.getElementsByClassName('fold_header')[0];
                        }
                        toggle_side_bar(pane, header, true)
                        e.stopPropagation();
                }
                function handle_toggle_side_bar_button(e){
                        document.getElementById('menu_toggle_button').click()
                        handle_toggle_side_bar(e);
                }

                function toggle_side_bar(pane, header, save) {
                        let active = (pane.classList.contains('active'))
                        if (active){
                                disable_side_bar(pane, header, save);
                        }
                        else {
                                enable_side_bar(pane, header, save);
                        }
                }
                function enable_side_bar(pane, header, save){
                        pane.classList.add('active');
                        pane.removeEventListener('click', handle_toggle_side_bar);
                        header.addEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, true) }
                }
                function disable_side_bar(pane, header, save){
                        pane.classList.remove('active');
                        pane.addEventListener('click', handle_toggle_side_bar);
                        header.removeEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, false) }
                }
                function set_correct_header_symbol(header){
                        let pane = header.parentElement;
                        let symbol = [['>', '<'],['<', '>']]
                        symbol = symbol[Number(header.classList.contains('right_pane_fold_header'))][Number(pane.classList.contains('active'))];
                        console.log(symbol);
                        header.innerHTML = symbol
                        return header;
                }
                function panel_folding_get_panel_name(header){
                        return ['left', 'right'][Number(header.classList.contains('right_pane_fold_header'))]
                }
                function save_panel_folding_state(header, active){
                        ls_set('pane_folding_state_'+panel_folding_get_panel_name(header), Number(active));
                }
                function load_panel_folding_state(panel_name){
                        val = ls_get('pane_folding_state_'+panel_name)
                        if (!val){ return {'exists': false, 'value': null}}
                        return {'exists': true, 'value': Boolean(Number(val))}
                }
                function set_pane_folding_start(left_header, right_header){
                        // small screen = closed
                        let right_pane_enabled = true;
                        let left_pane_enabled = true;
                        let w = window.visualViewport.width
                        if (w < 1000){
                                left_pane_enabled = false
                        }
                        if (w < 800){
                                right_pane_enabled = false
                        }

                        // get saved values if present
                        let rval = load_panel_folding_state('right')
                        if (rval['exists']){
                                right_pane_enabled = rval['value']
                        }
                        let lval = load_panel_folding_state('left')
                        if (lval['exists']){
                                left_pane_enabled = lval['value']
                        }

                        // default = enabled, so we only need to disable
                        if (!left_pane_enabled){
                                disable_side_bar(document.getElementById('left_pane'), document.getElementById('left_pane_fold_header'))
                        }
                        if (!right_pane_enabled){
                                disable_side_bar(document.getElementById('right_pane'), document.getElementById('right_pane_fold_header'))
                        }
                }

                function init_pane_folding(header){
                        set_correct_header_symbol(header);
                        header.addEventListener('click', handle_toggle_side_bar);
                }
                
                
                set_pane_folding_start()
                init_pane_folding(document.getElementById('left_pane_fold_header'));
                init_pane_folding(document.getElementById('right_pane_fold_header'));

                document.getElementById('left_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button);
                document.getElementById('right_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button);
        </script>

        <script src="/obs.html/static/load_dirtree_footer.js" type="text/javascript"></script>

        




</body>
</html>
